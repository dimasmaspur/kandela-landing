---
export interface Props {
	title: string;
	description?: string;
	keywords?: string;
	ogImage?: string;
	ogType?: string;
	canonical?: string;
}

const { 
	title, 
	description = "Kandela Technology - Your Guiding Light in Innovation. Kami menyediakan solusi teknologi inovatif termasuk Web3 Development, Website & App Development, Custom Software, dan IT Staffing Solutions.",
	keywords = "Kandela Technology, Web3 Development, Blockchain Development, Website Development, App Development, Custom Software, IT Staffing, Software House Jakarta, Technology Solutions Indonesia, Jasa Pembuatan Website, Jasa Aplikasi Mobile, Pengembangan Blockchain, Solusi Web3, Perusahaan Teknologi Jakarta, Software House Indonesia, Jasa IT Profesional, Pembuatan Aplikasi Web, Developer Blockchain Indonesia, Smart Contract Development, NFT Development Indonesia, DeFi Development, Decentralized Application, Jasa Web Development Jakarta, Mobile App Development Indonesia, Custom Software Indonesia, IT Consultant Jakarta, Digital Transformation Indonesia, Software Developer Jakarta, Technology Partner Indonesia, Outsourcing IT Indonesia, IT Staffing Jakarta, Tech Solutions Jakarta, Pembuatan Website Profesional, Aplikasi Android iOS, Web Application Development, Backend Development, Frontend Development, Full Stack Development Indonesia",
	ogImage = "/kandela-transparent.png",
	ogType = "website",
	canonical = Astro.url.pathname
} = Astro.props;

const siteUrl = "https://kandela.tech";
const fullUrl = `${siteUrl}${canonical}`;
const fullOgImage = `${siteUrl}${ogImage}`;
---

<!doctype html>
<html lang="id">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />
		<meta name="author" content="Kandela Technology" />
		<meta name="robots" content="index, follow" />
		<meta name="language" content="Indonesian" />
		<meta name="revisit-after" content="7 days" />
		
		<!-- Canonical URL -->
		<link rel="canonical" href={fullUrl} />
		
		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/logo-k-shine.webp" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={ogType} />
		<meta property="og:url" content={fullUrl} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={fullOgImage} />
		<meta property="og:site_name" content="Kandela Technology" />
		<meta property="og:locale" content="id_ID" />
		
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={fullUrl} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={fullOgImage} />
		
		<!-- Theme Color -->
		<meta name="theme-color" content="#00B4D8" />
		<meta name="msapplication-TileColor" content="#00B4D8" />
		
		<!-- Preconnect for Performance -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		
		<!-- Preload Critical Resources -->
		<link rel="preload" href="/kandela-transparent.png" as="image" />
		
		<!-- Humans.txt -->
		<link rel="author" href="/humans.txt" />
		
		<!-- Structured Data - Organization -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "Organization",
				"name": "Kandela Technology",
				"alternateName": "Kandela Tech",
				"url": "https://kandela.tech",
				"logo": "https://kandela.tech/logo-k-shine.webp",
				"description": "Kandela Technology adalah perusahaan teknologi yang menyediakan solusi inovatif dalam Web3 Development, Website & App Development, Custom Software, dan IT Staffing Solutions.",
				"address": {
					"@type": "PostalAddress",
					"addressLocality": "Jakarta",
					"addressCountry": "ID"
				},
				"sameAs": [
					"https://instagram.com/kandela.tech",
					"https://linkedin.com/company/kandelatech"
				],
				"contactPoint": {
					"@type": "ContactPoint",
					"contactType": "Customer Service",
					"availableLanguage": ["Indonesian", "English"]
				}
			}
		</script>
	</head>
	<body class="bg-white min-h-screen font-normal antialiased">
		<!-- Global Page Loader -->
		<div id="page-loader" class="fixed inset-0 z-[9999] bg-white flex items-center justify-center transition-opacity duration-500">
			<div class="flex flex-col items-center gap-4">
				<div class="relative">
					<!-- Animated Logo or Spinner -->
					<div class="w-20 h-20 border-4 border-[#00B4D8] border-t-transparent rounded-full animate-spin"></div>
					<div class="absolute inset-0 w-20 h-20 border-4 border-[#0077B6] border-b-transparent rounded-full animate-spin-reverse opacity-50"></div>
				</div>
				<div class="text-center">
					<h2 class="text-xl font-bold text-[#0D3B66] mb-1">Kandela Technology</h2>
					<p class="text-sm text-gray-600">Preparing your experience...</p>
				</div>
			</div>
		</div>
		
		<slot />
	</body>
</html>

<style is:global>
	@import "tailwindcss";
	
	/* Disable default smooth scrolling for GSAP */
	html {
		scroll-behavior: auto;
	}
	
	/* Ultra smooth optimizations */
	body::-webkit-scrollbar {
		width: 0px;
		background: transparent;
	}
	
	/* Lenis CSS optimizations */
	html.lenis {
		height: auto;
	}
	
	.lenis.lenis-smooth {
		scroll-behavior: auto;
	}
	
	.lenis.lenis-smooth [data-lenis-prevent] {
		overscroll-behavior: contain;
	}

	/* Page Loader Animations */
	@keyframes spin-reverse {
		from {
			transform: rotate(360deg);
		}
		to {
			transform: rotate(0deg);
		}
	}

	.animate-spin-reverse {
		animation: spin-reverse 1.5s linear infinite;
	}

	/* Hide page loader when loaded */
	body.page-loaded #page-loader {
		opacity: 0;
		pointer-events: none;
	}
</style>

<script is:inline>
	// Page loader script - runs immediately
	(function() {
		// Hide loader when page is fully loaded
		function hideLoader() {
			document.body.classList.add('page-loaded');
			setTimeout(function() {
				var loader = document.getElementById('page-loader');
				if (loader) {
					loader.style.display = 'none';
				}
			}, 500);
		}

		// Check if page is already loaded
		if (document.readyState === 'complete') {
			setTimeout(hideLoader, 300);
		} else {
			window.addEventListener('load', function() {
				setTimeout(hideLoader, 300);
			});
		}

		// Fallback: Hide after 5 seconds max
		setTimeout(function() {
			if (!document.body.classList.contains('page-loaded')) {
				// console.log('Fallback: Hiding page loader after timeout');
				hideLoader();
			}
		}, 5000);
	})();
</script>
